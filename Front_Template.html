<h4>{{Title}}</h4>

<div id='text'>{{Text}}</div>

<script>
/*
 * Configuration
 */
delimiter = {
    START: "@@@",
    END: "@@@",
    type: "token" // Use "tag" if the cloze is inside an HTML element, else "token"
};




text = document.querySelector('#text');


// Escape RegEx special tokens
function escapeRegEx(str) {
    return str.replace(/([\\^$.|?*+()\[\]{}])/g, "\\$1");
}


if (delimiter.type == "tag") {

    document.querySelectorAll(delimiter.START).forEach(
        cloze => {
            cloze.classList.add(...["cloze", "hidden-cloze"]);
        }
    )

} else {
    delimiter.START = escapeRegEx(delimiter.START);
    delimiter.END = escapeRegEx(delimiter.END);

    // Remove delimiters and put the content inside a span element.
    let re = new RegExp(`${delimiter.START}(.+?)${delimiter.END}`, "g");
    text.innerHTML = text.innerHTML.replace(re, '<span class="cloze hidden-cloze">$1</span>');
}
</script>